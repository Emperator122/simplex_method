#:import SimplexTableGrid widgets.simplex_table

<SimplexTableScreen>:

    BoxLayout:
        orientation: 'vertical'
        size: self.parent.size
        pos: self.parent.pos

        ScrollView:
            SimplexTableGrid:
                id: simplex_table_1
                padding: [0, 0, 0, 0]
                minimum_height: 10
                size_hint_y: None
                size_hint: (1, .9)

                sm_result: root.sm_result

        Label:
            size_hint: (1, .1)
            text: 'Таблица: ' + str(simplex_table_1.current_index+1) + ' из ' + str(simplex_table_1.count)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, .2)

            Button:
                text: 'Previous'
                on_press: simplex_table_1.load_previous()
            Button:
                text: 'Next'
                on_press: simplex_table_1.load_next()


<SignDropDown>:
    drop_down: drop_down.__self__
    Button:
        size_hint: (.1, .6)
        text: root.selected_value
        on_release: drop_down.open(self)
        on_parent: drop_down.dismiss()

    DropDown:
        id: drop_down
        on_select: root.selected_value = '{}'.format(args[1])
        Button:
            text: '<='
            size_hint_y: None
            height: 30
            on_press: drop_down.select(self.text)

        Button:
            text: '='
            size_hint_y: None
            height: 30
            on_press: drop_down.select(self.text)

        Button:
            text: '>='
            size_hint_y: None
            height: 30
            on_press: drop_down.select(self.text)


<LimitationWidget>:
    sign: drop_down.selected_value
    free_coefficient: free_coefficient_input.text
    coefficients: coefficients_input.text

    spacing: 25
    padding: [10, 0, 10, 0]
    TextInput:
        id: coefficients_input
        multiline: False
        size_hint: (1.5, .6)
        text: root.coefficients

    SignDropDown:
        id: drop_down
        selected_value: root.sign

    TextInput:
        id: free_coefficient_input
        multiline: False
        size_hint: (1.5, .6)
        text: root.free_coefficient


<InputScreen>:
    limitations_list_layout: limitations_list
    f: f_input.text
    BoxLayout:
        orientation: 'vertical'
        padding: [5, 5, 5, 5]
        spacing: 20

        Label:
            size_hint: (1, .1)
            text: 'Введите коэффициенты для f(x) (через \';\')'
        TextInput:
            id: f_input
            size_hint: (1, .1)
            multiline: False
            text: root.f

        BoxLayout:
            orientation: 'vertical'

            Label:
                size_hint: (1, .3)
                bold: True
                text: 'Ограничения'

            BoxLayout:
                padding: [10, 0, 10, 7]
                size_hint: (1, .1)
                orientation: 'horizontal'

                Label:
                    text: 'Коэффициенты левой части (через \';\')'
                    size_hint: (1, .2)

                Label:
                    text: 'Выберите знак'
                    size_hint: (1, .2)

                Label:
                    text: 'Свободный член'
                    size_hint: (1, .2)


            ScrollView:
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    id: limitations_list

        BoxLayout:
            padding: [0, 5, 0, 5]
            size_hint: (1, .15)
            spacing: 10
            Button:
                size_hint: (1, 1)
                text: 'Добавить ограничение'
                on_release: root.add_limitation()
            Button:
                size_hint: (1, 1)
                text: 'Удалить последнее ограничение'
                on_release: root.remove_last_limitation()

        Button:
            size_hint: (1, .2)
            text: 'Next screen'
            on_press: root.manager.open_screen('simplex_tables_screen', {'sm_result': root.calculate() })


<Navigator>:
    id: navigator

    input_screen: input_screen
    simplex_tables_screen: simplex_tables_screen

    InputScreen:
        id: input_screen
        name: 'input_screen'
        manager: navigator

    SimplexTableScreen:
        id: simplex_tables_screen
        name: "simplex_tables_screen"
        manager: navigator
