#:import ExtremumDropDown task_input.dropdown_widgets
#:import ErrorPopup error.error_popup.ErrorPopup

<InputScreen>:
    limitations_list_layout: limitations_list
    f: f_input.text
    extremum: extremum_dropdown.selected_value

    BoxLayout:
        orientation: 'vertical'
        padding: [5, 5, 5, 5]
        spacing: 20

        Label:
            size_hint: (1, .1)
            text: 'Введите коэффициенты для f(x) (через \';\')'

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint: (1, .1)

            TextInput:
                id: f_input
                write_tab: False
                size_hint: (8, 1)
                multiline: False
                text: root.f

            Label:
                size_hint: (0.1, 1)
                text: '->'

            ExtremumDropDown:
                id: extremum_dropdown
                selected_value: root.extremum

        BoxLayout:
            orientation: 'vertical'

            Label:
                size_hint: (1, .3)
                bold: True
                text: 'Ограничения'

            BoxLayout:
                padding: [10, 0, 10, 7]
                size_hint: (1, .1)
                orientation: 'horizontal'

                Label:
                    text: 'Коэффициенты левой части (через \';\')'
                    size_hint: (1, .2)

                Label:
                    text: 'Выберите знак'
                    size_hint: (1, .2)

                Label:
                    text: 'Свободный член'
                    size_hint: (1, .2)


            ScrollView:
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    id: limitations_list

        BoxLayout:
            padding: [0, 5, 0, 5]
            size_hint: (1, .15)
            spacing: 10
            Button:
                size_hint: (1, 1)
                text: 'Добавить ограничение'
                on_release: root.add_limitation()
            Button:
                size_hint: (1, 1)
                text: 'Удалить последнее ограничение'
                on_release: root.remove_last_limitation()

        Button:
            size_hint: (1, .1)
            text: 'Перейти к таблицам'
            on_press:
                result = ErrorPopup.error_checker(root.calculate)
                if result is not None: \
                root.manager.open_screen('simplex_tables_screen', {'sm_result': result })


